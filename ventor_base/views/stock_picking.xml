<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <data>
<!-- Views-->
        <record id='ventor_stock_picking_view' model='ir.ui.view'>
            <field name="name">Operation Types</field>
            <field name="model">stock.picking.type</field>
            <field name="priority">1000</field>
            <field name="arch" type="xml">
                <tree create="false" class="ventor_base_tree" editable="top">
                    <field name="name" attrs="{'readonly':True}"/>
                    <field name="warehouse_id" attrs="{'readonly':True}"/>
                    <field name="company_id" invisible="True"/>
                    <field name="confirm_source_location"/>
                    <field name="change_source_location"/>
                    <field name="show_next_product"/>
                    <field name="confirm_product"/>
                    <field name="apply_default_lots"/>
                    <field name="transfer_more_items"/>
                    <field name="confirm_destination_location"/>
                    <field name="apply_quantity_automatically"/>
                    <field name="change_destination_location"/>
                    <field name="autocomplete_the_item_quantity_field"/>
                    <field name="show_print_attachment_button"/>
                    <field name="manage_product_owner" attrs="{'readonly': [('is_consignment_enabled','=',False)]}"/>
                    <field name="is_package_tracking_enabled" invisible='1'/>
                    <field name="is_consignment_enabled" invisible='1'/>
                    <field name="manage_packages" attrs="{'readonly': [('is_package_tracking_enabled','=',False)]}"/>
                    <field name="scan_destination_package"
                           attrs="{'readonly': ['|', ('is_package_tracking_enabled','=',False), ('manage_packages','=',False)]}"/>
                    <field name="show_put_in_pack_button" attrs="{'readonly': [('is_package_tracking_enabled','=',False)]}"/>
                </tree>
            </field>
        </record>

        <record id='ventor_settings_tree_view' model='ir.ui.view'>
            <field name="name">Package Management</field>
            <field name="model">ventor.option.setting</field>
            <field name="priority">1000</field>
            <field name="arch" type="xml">
                <tree create="false" delete="false" editable="top">
                    <field name="name" readonly="1"/>
                    <field name="technical_name" readonly="1" groups="base.group_no_one"/>
                    <field name="is_set"/>
                    <field name="action_type" readonly="1" groups="base.group_no_one"/>
                    <field name="description" readonly="1"/>
                </tree>
            </field>
        </record>

        <record id="ventor_stock_picking_form" model="ir.ui.view">
            <field name="name">Operation Types</field>
            <field name="model">stock.picking.type</field>
            <field name="inherit_id" ref="stock.view_picking_type_form"/>
            <field name="arch" type="xml">
                <xpath expr="//group[@name='stock_picking_type_lot']" position="before">
                    <group string="Ventor Configuration" colspan="12">
                        <group>
                            <field name="confirm_source_location"/>
                            <field name="change_source_location"
                                   attrs="{'readonly':[('confirm_source_location','!=',True)]}"/>
                            <field name="show_next_product"/>
                            <field name="confirm_product"/>
                            <field name="apply_default_lots"/>
                            <field name="transfer_more_items"/>
                            <field name="confirm_destination_location"/>
                            <field name="behavior_on_backorder_creation"/>
                            <field name="behavior_on_split_operation" required="1"/>
                        </group>
                        <group>
                            <field name="apply_quantity_automatically"
                                   attrs="{'readonly':[('confirm_destination_location','!=',True)]}"/>
                            <field name="change_destination_location"/>
                            <field name="autocomplete_the_item_quantity_field"/>
                            <field name="show_print_attachment_button"/>
                            <field name="manage_product_owner" attrs="{'invisible': [('is_consignment_enabled','=',False)]}"/>
                            <field name="is_package_tracking_enabled" invisible='1'/>
                            <field name="is_consignment_enabled" invisible='1'/>
                            <field name="manage_packages" attrs="{'invisible': [('is_package_tracking_enabled','=',False)]}"/>
                            <field name="scan_destination_package"
                                   attrs="{'invisible': ['|', ('is_package_tracking_enabled','=',False), ('manage_packages','=',False)],
                                           'readonly': ['|', ('is_package_tracking_enabled','=',False), ('manage_packages','=',False)]}"/>
                            <field name="show_put_in_pack_button" attrs="{'invisible': [('is_package_tracking_enabled','=',False)]}"/>
                        </group>
                    </group>
                </xpath>
            </field>
        </record>

<!-- Style -->
        <template id="assets_backend" name="ventor_base_assets" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">
                <!--  Scss  -->
                <link rel="stylesheet" type="text/scss" href="ventor_base/static/src/scss/stock_picking_type.scss"/>
            </xpath>
        </template>

<!-- Actions-->
        <record id='ventor_stock_picking_action' model='ir.actions.act_window'>
            <field name="name">Operation Types</field>
            <field name="res_model">stock.picking.type</field>
            <field name="view_mode">tree,form</field>
            <field name="usage">menu</field>
            <field name="view_id" ref="ventor_stock_picking_view"/>
        </record>

        <record id="ventor_configs_action" model="ir.actions.act_window">
            <field name="name">Configuration</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.config.settings</field>
            <field name="view_mode">form</field>
            <field name="target">inline</field>
            <field name="context">{'module' : 'ventor_base'}</field>
        </record>

        <record id='ventor_package_management_action' model='ir.actions.act_window'>
            <field name="name">Package Management</field>
            <field name="res_model">ventor.option.setting</field>
            <field name="view_mode">tree,form</field>
            <field name="usage">menu</field>
            <field name="view_id" ref="ventor_settings_tree_view"/>
            <field name="domain">[('action_type', '=', 'package_management')]</field>
        </record>

        <record id='ventor_batch_picking_action' model='ir.actions.act_window'>
            <field name="name">Batch Picking</field>
            <field name="res_model">ventor.option.setting</field>
            <field name="view_mode">tree,form</field>
            <field name="usage">menu</field>
            <field name="view_id" ref="ventor_settings_tree_view"/>
            <field name="domain">[('action_type', '=', 'batch_picking')]</field>
        </record>

        <record id='ventor_internal_transfers_action' model='ir.actions.act_window'>
            <field name="name">Internal Transfers</field>
            <field name="res_model">ventor.option.setting</field>
            <field name="view_mode">tree,form</field>
            <field name="usage">menu</field>
            <field name="view_id" ref="ventor_settings_tree_view"/>
            <field name="domain">[('action_type', '=', 'internal_transfers')]</field>
        </record>

        <record id='ventor_putaway_action' model='ir.actions.act_window'>
            <field name="name">Putaway</field>
            <field name="res_model">ventor.option.setting</field>
            <field name="view_mode">tree,form</field>
            <field name="usage">menu</field>
            <field name="view_id" ref="ventor_settings_tree_view"/>
            <field name="domain">[('action_type', '=', 'putaway')]</field>
        </record>

        <record id='ventor_instant_inventory_action' model='ir.actions.act_window'>
            <field name="name">Instant Inventory</field>
            <field name="res_model">ventor.option.setting</field>
            <field name="view_mode">tree,form</field>
            <field name="usage">menu</field>
            <field name="view_id" ref="ventor_settings_tree_view"/>
            <field name="domain">[('action_type', '=', 'instant_inventory')]</field>
        </record>

        <record id='ventor_inventory_adjustments_action' model='ir.actions.act_window'>
            <field name="name">Inventory Adjustments</field>
            <field name="res_model">ventor.option.setting</field>
            <field name="view_mode">tree,form</field>
            <field name="usage">menu</field>
            <field name="view_id" ref="ventor_settings_tree_view"/>
            <field name="domain">[('action_type', '=', 'inventory_adjustments')]</field>
        </record>

        <record id='ventor_quick_info_action' model='ir.actions.act_window'>
            <field name="name">Quick info</field>
            <field name="res_model">ventor.option.setting</field>
            <field name="view_mode">tree,form</field>
            <field name="usage">menu</field>
            <field name="view_id" ref="ventor_settings_tree_view"/>
            <field name="domain">[('action_type', '=', 'quick_info')]</field>
        </record>

<!-- Menus -->
        <menuitem name="Ventor Configuration"
                  id="ventor_app_base_menu"
                  web_icon="ventor_base,static/description/icon.png"
                  groups="ventor_role_admin"/>

        <menuitem id="ventor_app_settings"
                  name="Settings"
                  parent="ventor_app_base_menu"
                  action="ventor_configs_action"/>

        <menuitem name="Ventor Settings"
                  id="ventor_settings_app_menu"
                  parent="ventor_app_base_menu"
                  action="ventor_stock_picking_action"/>

        <menuitem name="Warehouse Operations"
                  id="ventor_wh_operations_app_menu"
                  parent="ventor_settings_app_menu"
                  action="ventor_stock_picking_action"/>

        <menuitem name="Package Management"
                  id="ventor_package_management_app_menu"
                  parent="ventor_settings_app_menu"
                  action="ventor_package_management_action"/>

        <menuitem name="Batch Picking"
                  id="ventor_batch_picking_app_menu"
                  parent="ventor_settings_app_menu"
                  action="ventor_batch_picking_action"/>

        <menuitem name="Internal Transfers"
                  id="ventor_internal_transfers_app_menu"
                  parent="ventor_settings_app_menu"
                  action="ventor_internal_transfers_action"/>

        <menuitem name="Putaway"
                  id="ventor_putaway_app_menu"
                  parent="ventor_settings_app_menu"
                  action="ventor_putaway_action"/>

        <menuitem name="Instant Inventory"
                  id="ventor_instant_inventory_app_menu"
                  parent="ventor_settings_app_menu"
                  action="ventor_instant_inventory_action"/>

        <menuitem name="Inventory Adjustments"
                  id="ventor_inventory_adjustments_app_menu"
                  parent="ventor_settings_app_menu"
                  action="ventor_inventory_adjustments_action"/>

        <menuitem name="Quick info"
                  id="ventor_quick_info_app_menu"
                  parent="ventor_settings_app_menu"
                  action="ventor_quick_info_action"/>

        <menuitem name="User Settings"
                  id="ventor_app_user_settings_menu"
                  parent="ventor_app_base_menu"
                  action="base.action_res_users"/>
    </data>
</odoo>
